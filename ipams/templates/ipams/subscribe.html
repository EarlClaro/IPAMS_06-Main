{% extends 'ipams/base.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block head %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" type="text/css" href="{% static 'css/subscription.css' %}"> <!-- Include your custom CSS file -->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Subscription Page</title>

<style>
    /* Styles for Rectangle 128 */
    .rectangle-container {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        gap: 30px;
        margin: 0 15px;
    }

    .rectangle-long1,
    .rectangle-long2,
    .rectangle-long3 {
        position: relative;
        width: 330px;
        height: 500px;
        background: gold;
        box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
        border-radius: 45px;
        margin: 15px;
        transition: transform 0.3s ease, background-color 0.3s ease;
    }

    .rectangle-long1 .bronze,
    .rectangle-long2 .bronze,
    .rectangle-long3 .bronze {
        font-size: 25px;
        font-weight: bold;
        padding-top: 20px;
        padding-left: 10px;
    }

    .rectangle-long1 .free,
    .rectangle-long2 .free,
    .rectangle-long3 .free {
        text-align: center;
        padding-top: 15px;
        font-size: 50px;
        font-weight: bold;
    }

    .rectangle-long1 .join-button,
    .rectangle-long2 .subscribe-button,
    .rectangle-long3 .subscribe-button {
        position: absolute;
        bottom: 270px;
        left: 50%;
        transform: translateX(-50%);
        background-color: maroon;
        color: white;
        padding: 10px 20px;
        font-size: 13px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        border-radius: 25px;
        border: none;
        cursor: pointer;
        transition: background-color 0.6s, box-shadow 0.6s, color 0.6s;
        box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.1);
    }

    .rectangle-long1:hover,
    .rectangle-long2:hover,
    .rectangle-long3:hover {
        background-color: maroon;
        color: white;
        transform: translateY(-10px);
        box-shadow: 0px 8px 8px rgba(0, 0, 0, 0.5);
    }

    .rectangle-long1:hover .join-button,
    .rectangle-long2:hover .subscribe-button,
    .rectangle-long3:hover .subscribe-button {
        background-color: gold;
        color: black;
    }

    .rectangle-long1 .join-button:hover,
    .rectangle-long2 .subscribe-button:hover,
    .rectangle-long3 .subscribe-button:hover {
        background-color: darkgoldenrod;
        color: black;
        box-shadow: 0px 8px 8px rgba(0, 0, 0, 0.5);
    }

    .hh {
        font-size: small;
        padding-left: 10px;
    }

    .whats {
        text-align: justify;
        padding-top: 100px;
        font-weight: bold;
        padding-left: 8px;
    }

    .offer {
        text-align: justify;
        padding-top: 15px;
        font-size: x-small;
        padding-left: 8px;
        padding-right: 10px;
    }

    .rectangle-long1 a,
    .rectangle-long2 a,
    .rectangle-long3 a {
        color: inherit;
        text-decoration: none;
    }

    .ss h1 {
        text-align: center;
    }

    .ss p {
        text-align: center;
    }

    /* Media Queries for Mobile Responsiveness */
    @media (max-width: 768px) {
        .rectangle-long1,
        .rectangle-long2,
        .rectangle-long3 {
            width: 100%;
            height: auto;
            margin: 10px 0;
        }

        .rectangle-container {
            flex-direction: column;
            align-items: stretch;
        }

        .rectangle-long1 .join-button,
        .rectangle-long2 .subscribe-button,
        .rectangle-long3 .subscribe-button {
            bottom: 20px;
            font-size: 16px;
            padding: 15px 30px;
        }

        .rectangle-long1 .free,
        .rectangle-long2 .free,
        .rectangle-long3 .free {
            font-size: 40px;
        }

        .rectangle-long1 .bronze,
        .rectangle-long2 .bronze,
        .rectangle-long3 .bronze {
            font-size: 20px;
        }

        .offer {
            font-size: small;
        }

        .whats {
            padding-top: 20px;
            font-size: medium;
        }

        .hh {
            font-size: medium;
        }
        div {
        max-width: 600px;
        margin: 0 auto; /* Center align the div */
        text-align: left; /* Align text to left within the div */
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 10px;
        background-color: #f9f9f9;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

        h4 {
            color: #333;
        }

        p {
            color: #666;
        }
        
        }
        .bronzes{
            padding-top: 200px;
            padding-bottom: 150px;
        }
</style>

{% endblock %}

{% block content %}
<script>
    fetch("{% url 'fetch_subscriptions' %}")
        .then(response => response.json())
        .then(data => {
            // Update price display
            document.getElementById('free-price').innerText = data.free_price;
            document.getElementById('standard-price').innerText = data.standard_price;
            document.getElementById('premium-price').innerText = data.premium_price;
            
            // Update plan name display if needed 
            
            // Optional: Set values in input fields if they are used
            // document.getElementById('standard-price-input').value = data.standard_price;
            // document.getElementById('premium-price-input').value = data.premium_price;
        });

        fetch("{% url 'fetch_subscriptions' %}")
        .then(response => response.json())
        .then(data => {
            // Update price display
            document.getElementById('free-plan-name').innerText = data.free_plan_name;
            document.getElementById('standard-plan-name').innerText = data.standard_plan_name;
            document.getElementById('premium-plan-name').innerText = data.premium_plan_name;

        });
</script>



<div class="ss">
    <h1>Welcome to Our Subscription Page!</h1>
    <p>Subscribe to our service to get access to exclusive content and updates.</p>
</div>

<div class="rectangle-container">
    {% if user.role.id == 1 %}
    <div class="rectangle-long1">
        <div class="bronze" style="text-align: center; font-size: 40px;">FREE</div>
        <div class="free" style="text-align: center;">₱0</div>
        <br>
        <div class="whats" style="margin-left: 20px; font-size: 18px; margin-right: 20px;">What's included:</div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;"><i class="fa-solid fa-check"></i> Can View Published Research Records</div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;"><i class="fa-solid fa-check"></i> Can Request Download for a Published Research Record</div>
        <a href="{% url 'payment_portal' %}" class="join-button">Join for Free</a>
    </div>

    <div class="rectangle-long3">
        <div class="bronze" style="text-align: center;font-size: 40px;">PREMIUM</div>
        <div class="hh" style="text-align: center;">Per Semester/ 6 Months</div>
        <div class="free">₱149</div>
        <a href="{% url 'create_payment_link' %}?tier=premium" class="subscribe-button">Subscribe</a>
        <div class="whats" style="margin-left: 20px; font-size: 18px; margin-right: 20px;">What's included:</div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;"><i class="fa-solid fa-check"></i> Comprehensive subscription with extensive access and functionality</div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;"><i class="fa-solid fa-check"></i> Includes view access to all published research records, instant download, and AI chatbot access</div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px; margin-bottom: 20px;"><i class="fa-solid fa-check"></i> Allows instant download of all published research records</div>
    </div>
    {% else %}
    {% if user.is_admin != 1 and subscription_plan_name == "Premium" or user.is_admin != 1 and subscription_plan_name == "Standard" %}
    <div class="bronzes" style="text-align: center; font-size: 40px;">You Are Currently Subscribe<br>{{ subscription_plan_name }}</div>
    {% else %}
    <div class="rectangle-long1">
        <div class="bronze" id="free-plan-name" style="text-align: center;font-size: 40px;"></div>
        <div class="free">₱<span id="free-price">0</span></div>
        <br>
        <div class="whats" style="margin-left: 20px; font-size: 18px; margin-right: 20px;">What's included:</div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;"><i class="fa-solid fa-check"></i> Can View Published Research Records</div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;"><i class="fa-solid fa-check"></i> Can Request Download for a Published Research Record</div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;"><i class="fa-solid fa-check"></i> Can Add/Publish Research Records</div>
        <a href="{% url 'payment_portal' %}" class="join-button">Join for Free</a>
    </div>
    {% endif %}
    {% if user.is_admin != 1 and subscription_plan_name == "Premium" or user.is_admin != 1 and subscription_plan_name == "Standard" %}
    <div class="bronzes" style="text-align: center; font-size: 40px;">You Are Currently Subscribe<br>{{ subscription_plan_name }}</div>
    {% else %}
    <div class="rectangle-long2">
        <div class="bronze" id="standard-plan-name" style="text-align: center;font-size: 40px;"></div>
        <div class="hh" style="text-align: center;">Per Semester/ 6 Months</div>
        
    
        <tbody>
            <div class="free">₱<span id="standard-price">0</span></div>
        </tbody>
    </table>
        <a href="{% url 'create_payment_link' %}?tier=standard" class="subscribe-button">Subscribe</a>
        <div class="whats" style="margin-left: 20px; font-size: 18px; margin-right: 20px;">What's included:</div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;"><i class="fa-solid fa-check"></i> Enhanced features for a reasonable fee</div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;"><i class="fa-solid fa-check"></i> Includes view access to all published research records, instant download, and AI chatbot access (OpenAI API key required)</div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;"><i class="fa-solid fa-check"></i> Instant download and access to import records and file management</div>
    </div>
    {% endif %}
    {% if user.is_admin != 1 and subscription_plan_name == "Premium" or user.is_admin != 1 and subscription_plan_name == "Standard" %}
    <div class="bronzes" style="text-align: center; font-size: 40px;">You Are Currently Subscribe<br>{{ subscription_plan_name }}</div>
    {% else %}
    <div class="rectangle-long3">
      <div class="bronze" id="premium-plan-name" style="text-align: center; font-size: 40px;">
        
    </div>
        <div class="hh" style="text-align: center;">Per Semester/ 6 Months</div>
        <div class="free">₱<span id="premium-price">0</span></div>
        <a href="{% url 'create_payment_link' %}?tier={{ subscription_plan_name|lower }}" class="subscribe-button">Subscribe</a>
        <div class="whats" style="margin-left: 20px; font-size: 18px; margin-right: 20px;">What's included:</div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;">
            <i class="fa-solid fa-check"></i> Comprehensive subscription with extensive access and functionality
        </div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;">
            <i class="fa-solid fa-check"></i> Includes view access to all published research records, instant download, and AI chatbot access with unlimited tokens
        </div>
        <div class="offer" style="margin-left: 20px; font-size: 12px; margin-right: 20px;">
            <i class="fa-solid fa-check"></i> Instant download and access to import records and file management
        </div>
    </div>
{% endif %}
{% endif %}
</div>
    <div class="container" style="width: 800px;">
        <div style="text-align: center;">
            <br>
            <h4 style="color: #333;"><b>How to subscribe to IPAMS Pro?</b></h4>
            <br>
            <br>
            <p style="color: #666; text-align: justify;">
                > To subscribe, you must be a verified account, either a guest or a student account. Your account must be verified by your email.
            </p>
            <br>
            <p style="color: #666; text-align: justify;">
                > Subscribers will be given an option to renew or cancel before the renewal date.
            </p>
            <br>
            <p style="color: #666; text-align: justify;">
                > In the event of a payment failure, your subscription will be cancelled automatically. To continue enjoying the benefits, you'll need to resubscribe.
            </p>
            <br>
            <p style="color: #666; text-align: justify;">
                > You have the flexibility to cancel your IPAMS Pro subscription at any time. However, the cancellation will only take effect on the renewal date of the following month.
            </p>
            <br>
            <p style="color: #666; text-align: justify;">
                > Once subscribed, you'll gain access to a wealth of exclusive content and updates, empowering you to conduct your research like a pro.
            </p>
        </div>
    </div>
    				<!-- Chatbot -->
                    {% if user.is_subscribed == 1 %}
                    {% if user.role.id > 0 %}
                        {% include 'records/chatbot.html' with is_subscribed=1 %}
                    {% endif %}
                {% else %}
                    {% include 'records/chatbot.html' %}
                {% endif %}
</div>
{% endblock %}